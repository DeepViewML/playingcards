stages:
  manifest:
    cmd: make manifest
    deps:
    - Makefile
    outs:
    - out/converter.manifest
    - out/modelpack.manifest
  train:
    cmd: make train
    params:
    - params.yaml:
    deps:
    - out/modelpack.manifest
    - Makefile
    - dataset
    - dataset.yaml
    outs:
    - out/config.json
    - out/labels.txt
    - out/last.h5
    - out/best.h5
  deploy:
    cmd: make deploy
    params:
    - params.yaml:
    deps:
    - out/converter.manifest
    - Makefile
    - dataset
    - out/labels.txt
    - out/last.h5
    - out/best.h5
    outs:
    - out/last.rtm
    - out/best.rtm